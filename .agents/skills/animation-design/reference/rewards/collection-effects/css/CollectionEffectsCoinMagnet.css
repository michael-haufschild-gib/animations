/* Coin Magnet Collection Animation - CSS Variant */

.coin-magnet-container {
  position: relative;
  width: 100%;
  min-height: 300px;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
}

.coin-magnet-target {
  position: relative;
  width: 100%;
  height: 100%;
  min-height: 300px;
}

.coin-magnet-coin {
  position: absolute;
  width: 40px;
  height: 40px;
  animation: coin-magnet-flight 1000ms cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
  will-change: transform, opacity;
  pointer-events: none;
}

.coin-magnet-coin__image {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* Flight animation: coins fly from random positions to top-right target */
/* Uses CSS custom properties set from React for precise positioning */
@keyframes coin-magnet-flight {
  0% {
    transform: translate(-50%, -50%) scale(1) rotate(0deg);
    opacity: 0.8;
  }
  30% {
    opacity: 1;
  }
  50% {
    /* Mid-flight: scale up slightly, partial rotation */
    transform: translate(
      calc(-50% + var(--translate-x) * 0.5),
      calc(-50% + var(--translate-y) * 0.5)
    ) scale(1.2) rotate(calc(var(--coin-rotation, 10deg) * 0.5));
    opacity: 1;
  }
  80% {
    opacity: 1;
  }
  100% {
    /* End at target position */
    transform: translate(
      calc(-50% + var(--translate-x)),
      calc(-50% + var(--translate-y))
    ) scale(0.8) rotate(var(--coin-rotation, 10deg));
    opacity: 0;
  }
}

/* Reduced motion: coins fade in/out at target without flight */
@media (prefers-reduced-motion: reduce) {
  .coin-magnet-coin {
    animation: coin-magnet-fade 1000ms ease-out forwards;
  }

  @keyframes coin-magnet-fade {
    0% {
      opacity: 0;
      transform: translate(
        calc(-50% + var(--translate-x)),
        calc(-50% + var(--translate-y))
      ) scale(0.8);
    }
    30% {
      opacity: 1;
      transform: translate(
        calc(-50% + var(--translate-x)),
        calc(-50% + var(--translate-y))
      ) scale(1);
    }
    70% {
      opacity: 1;
      transform: translate(
        calc(-50% + var(--translate-x)),
        calc(-50% + var(--translate-y))
      ) scale(1);
    }
    100% {
      opacity: 0;
      transform: translate(
        calc(-50% + var(--translate-x)),
        calc(-50% + var(--translate-y))
      ) scale(0.8);
    }
  }
}
