/* Container */
.tfx-xp-container {

  --text-effects-xp-number-pop-bg-1: #c6ff77;
  --text-effects-xp-number-pop-bg-2: #a8ff3e;
  --text-effects-xp-number-pop-text-shadow-1: rgb(198 255 119 / 90%);
  --text-effects-xp-number-pop-color-1: #b8ff5e;
  --text-effects-xp-number-pop-text-shadow-2: rgb(184 255 94 / 90%);
  --text-effects-xp-number-pop-text-shadow-3: rgb(168 255 62 / 90%);
  --text-effects-xp-number-pop-color-2: #9bff28;
  --text-effects-xp-number-pop-text-shadow-4: rgb(155 255 40 / 90%);
  --text-effects-xp-number-pop-color-3: #8eff10;
  --text-effects-xp-number-pop-text-shadow-5: rgb(142 255 16 / 90%);
  --text-effects-xp-number-pop-text-shadow-100: rgb(198 255 119 / 80%);
  --text-effects-xp-number-pop-text-shadow-101: rgb(198 255 119 / 50%);
  --text-effects-xp-number-pop-text-shadow-102: rgb(0 0 0 / 30%);
  position: relative;
  min-height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: visible;
}

/* Number Wrapper - GPU Optimized */
.tfx-xp-number-wrapper {
  display: flex;
  align-items: baseline;
  position: relative;
  z-index: 2;

  /* GPU acceleration */
  will-change: transform, opacity;
  backface-visibility: hidden;
  transform-origin: center;

  /* Animation */
  animation: tfx-xp-number-entrance 1600ms cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
  opacity: 0;
}

/* Number Value */
.tfx-xp-number-value {
  font-size: 56px;
  font-weight: 900;
  background: linear-gradient(135deg, var(--text-effects-xp-number-pop-bg-1), var(--text-effects-xp-number-pop-bg-2));
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow:
    0 0 30px var(--text-effects-xp-number-pop-text-shadow-100),
    0 0 60px var(--text-effects-xp-number-pop-text-shadow-101),
    0 2px 4px var(--text-effects-xp-number-pop-text-shadow-102);
  letter-spacing: 2px;

  /* GPU acceleration */
  will-change: opacity;
  backface-visibility: hidden;
}

/* XP Label */
.tfx-xp-label {
  font-size: 24px;
  margin-left: 8px;
  font-weight: 700;
  color: var(--text-effects-xp-number-pop-bg-2);

  /* GPU acceleration */
  will-change: opacity;
  backface-visibility: hidden;

  /* Animation */
  animation: tfx-xp-label-fade 400ms 400ms ease-out forwards;
  opacity: 0;
}

/* ============================================================================
   Floating Particles
   ========================================================================== */

.tfx-xp-particle {
  position: absolute;
  left: 50%;
  top: 50%;
  font-weight: 700;
  pointer-events: none;
  z-index: 3;

  /* GPU acceleration */
  will-change: transform, opacity;
  backface-visibility: hidden;
  transform-origin: center;

  /* Animation - delay set via inline style for timing sync */
  animation: tfx-xp-particle-burst 2600ms ease-out forwards;
  opacity: 0;

  /* Initial position */
  transform: translate3d(-50%, -50%, 0);
}

/* Particle Sizes - Inner layer larger, outer layer smaller */
.tfx-xp-particle:nth-child(-n + 5) {
  font-size: 18px;
}

.tfx-xp-particle:nth-child(n + 6) {
  font-size: 14px;
}

/* Particle Colors - Gradient from bright green to lime */
.tfx-xp-particle:nth-child(1),
.tfx-xp-particle:nth-child(6) {
  color: var(--text-effects-xp-number-pop-bg-1);
  text-shadow: 0 0 15px var(--text-effects-xp-number-pop-text-shadow-1);
}

.tfx-xp-particle:nth-child(2),
.tfx-xp-particle:nth-child(7) {
  color: var(--text-effects-xp-number-pop-color-1);
  text-shadow: 0 0 15px var(--text-effects-xp-number-pop-text-shadow-2);
}

.tfx-xp-particle:nth-child(3),
.tfx-xp-particle:nth-child(8) {
  color: var(--text-effects-xp-number-pop-bg-2);
  text-shadow: 0 0 15px var(--text-effects-xp-number-pop-text-shadow-3);
}

.tfx-xp-particle:nth-child(4),
.tfx-xp-particle:nth-child(9) {
  color: var(--text-effects-xp-number-pop-color-2);
  text-shadow: 0 0 15px var(--text-effects-xp-number-pop-text-shadow-4);
}

.tfx-xp-particle:nth-child(5),
.tfx-xp-particle:nth-child(10) {
  color: var(--text-effects-xp-number-pop-color-3);
  text-shadow: 0 0 15px var(--text-effects-xp-number-pop-text-shadow-5);
}

/* ============================================================================
   Keyframe Animations
   ========================================================================== */

/* Number entrance with pop effect */
@keyframes tfx-xp-number-entrance {
  0% {
    opacity: 0;
    transform: scale3d(0.3, 0.3, 1) translate3d(0, 20px, 0);
  }
  50% {
    opacity: 1;
    transform: scale3d(1.15, 1.15, 1) translate3d(0, -5px, 0);
  }
  100% {
    opacity: 1;
    transform: scale3d(1, 1, 1) translate3d(0, 0, 0);
  }
}

/* Label fade-in */
@keyframes tfx-xp-label-fade {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 0.8;
  }
}

/* Particle burst - Uses CSS variables for dynamic positioning */
@keyframes tfx-xp-particle-burst {
  0% {
    opacity: 0;
    transform: translate3d(-50%, -50%, 0) scale3d(0, 0, 1);
  }
  20% {
    opacity: 1;
    transform: translate3d(calc(-50% + var(--particle-x)), calc(-50% + var(--particle-y)), 0)
      scale3d(1, 1, 1);
  }
  50% {
    opacity: 1;
    transform: translate3d(
        calc(-50% + var(--particle-x) * 1.2),
        calc(-50% + var(--particle-y) * 1.2 - 20px),
        0
      )
      scale3d(1, 1, 1);
  }
  100% {
    opacity: 0;
    transform: translate3d(
        calc(-50% + var(--particle-x) * 1.5),
        calc(-50% + var(--particle-y) * 1.5 - 40px),
        0
      )
      scale3d(0.7, 0.7, 1);
  }
}
