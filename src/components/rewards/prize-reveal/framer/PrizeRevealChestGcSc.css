.pf-chest-gc-sc {
  --burst-bg: rgb(255 225 125 / 70%);
  --sparkle-bg: rgb(255 235 150);
  --sparkle-glow: rgb(255 220 90 / 50%);
  --text-shadow: rgb(0 0 0 / 40%);
  --text-shadow-strong: rgb(0 0 0 / 50%);
  --claim-btn-border: rgb(255 116 149);
  --claim-btn-bg-start: rgb(255 89 129);
  --claim-btn-bg-end: rgb(200 53 88);
  --claim-btn-text: rgb(255 255 255);
  --claim-btn-glow: rgb(255 89 129 / 25%);
  --claim-btn-hover-bg-start: rgb(255 107 143);
  --claim-btn-hover-bg-end: rgb(214 69 106);
  --claim-btn-hover-border: rgb(255 134 165);
  --claim-btn-hover-glow: rgb(255 89 129 / 35%);
  --claim-burst-inner: rgb(255 200 100 / 40%);
  --claim-burst-outer: rgb(255 150 80 / 20%);
  --claim-btn-text-shadow: rgb(0 0 0 / 50%);
  --claim-btn-shadow-dark: rgb(0 0 0 / 30%);
  --claim-btn-hover-shadow-dark: rgb(0 0 0 / 35%);
  position: relative;
  inline-size: 100%;
  block-size: 280px;
  overflow: hidden;
}

.pf-chest-gc-sc__stage {
  position: relative;
  inline-size: 100%;
  block-size: 100%;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-block-end: 24px;
  overflow: hidden;
}

/* ─── Chest ─── */

.pf-chest-gc-sc__chest {
  position: relative;
  z-index: 3;
  inline-size: clamp(100px, 30%, 150px);
  pointer-events: none;
}

.pf-chest-gc-sc__chest--shake {
  animation: pf-chest-gc-sc-shake 0.6s ease-in-out;
}

.pf-chest-gc-sc__chest-image {
  position: relative;
  z-index: 2;
  inline-size: 100%;
  block-size: auto;
  object-fit: contain;
  filter: drop-shadow(0 10px 14px rgb(0 0 0 / 40%));
}

/* ─── Burst flash ─── */

.pf-chest-gc-sc__burst {
  position: absolute;
  z-index: 4;
  inset-inline-start: 50%;
  inset-block-end: 25px;
  inline-size: 1px;
  block-size: 1px;
  border-radius: 50%;
  background: transparent;
  box-shadow: 0 0 120px 100px var(--burst-bg);
  pointer-events: none;
}

/* ─── Burst sparkles ─── */

.pf-chest-gc-sc__sparkles {
  position: absolute;
  z-index: 6;
  inset-inline-start: 50%;
  inset-block-end: 42px;
  pointer-events: none;
}

.pf-chest-gc-sc__sparkle {
  position: absolute;
  inline-size: var(--size, 4px);
  block-size: var(--size, 4px);
  border-radius: 50%;
  background: var(--sparkle-bg);
  box-shadow: 0 0 6px 2px var(--sparkle-glow);
  pointer-events: none;
}

/* ─── Prizes ─── */

.pf-chest-gc-sc__prizes {
  position: absolute;
  inset: 0;
  z-index: 5;
  pointer-events: none;
}

.pf-chest-gc-sc__prize {
  position: absolute;
  inset-block-start: 16px;
  inset-inline-start: 50%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

/* Prize type colors */

.pf-chest-gc-sc__prize--gc {
  --ray-color: rgb(255 200 50 / 30%);
  --glow-color: rgb(255 190 50 / 50%);
  --label-color: rgb(255 220 100);
  --amount-color: rgb(255 215 70);
  --amount-glow: rgb(255 200 50 / 45%);
}

.pf-chest-gc-sc__prize--sc {
  --ray-color: rgb(50 210 120 / 30%);
  --glow-color: rgb(50 200 120 / 50%);
  --label-color: rgb(100 225 145);
  --amount-color: rgb(80 230 130);
  --amount-glow: rgb(50 200 120 / 45%);
}

.pf-chest-gc-sc__prize--fs {
  --ray-color: rgb(120 200 255 / 30%);
  --glow-color: rgb(100 190 255 / 50%);
  --label-color: rgb(140 215 255);
  --amount-color: rgb(130 215 255);
  --amount-glow: rgb(100 200 255 / 45%);
}

.pf-chest-gc-sc__prize--rr {
  --ray-color: rgb(180 110 255 / 30%);
  --glow-color: rgb(170 100 255 / 50%);
}

/* ─── Prize glow (inside icon-wrap for correct centering) ─── */

.pf-chest-gc-sc__prize-glow {
  position: absolute;
  z-index: 0;
  inset-inline-start: 50%;
  inset-block-start: 50%;
  inline-size: 1px;
  block-size: 1px;
  translate: -50% -50%;
  border-radius: 50%;
  background: transparent;
  box-shadow: 0 0 40px 30px var(--glow-color);
  pointer-events: none;
}

/* ─── Prize icon ─── */

.pf-chest-gc-sc__prize-icon-wrap {
  position: relative;
  inline-size: 62px;
  block-size: 52px;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: visible;
}

.pf-chest-gc-sc__prize-icon {
  position: relative;
  z-index: 2;
  max-inline-size: 100%;
  max-block-size: 100%;
  object-fit: contain;
  filter: drop-shadow(0 3px 6px rgb(0 0 0 / 35%));
}

/* Random reward icon is larger (no text below) */

.pf-chest-gc-sc__prize--rr .pf-chest-gc-sc__prize-icon-wrap {
  inline-size: 76px;
  block-size: 64px;
}

/* ─── Prize rays ─── */

.pf-chest-gc-sc__prize-rays-wrap {
  position: absolute;
  z-index: 1;
  inline-size: 135px;
  aspect-ratio: 1 / 1;
  inset-inline-start: 50%;
  inset-block-start: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
}

.pf-chest-gc-sc__prize-rays-spin,
.pf-chest-gc-sc__prize-rays {
  position: absolute;
  inset: 0;
  pointer-events: none;
  transform-origin: 50% 50%;
}

.pf-chest-gc-sc__prize-ray {
  position: absolute;
  inset: 0;
  transform: rotate(var(--ray-rotation));
  transform-origin: 50% 50%;
}

.pf-chest-gc-sc__prize-ray::before {
  content: '';
  position: absolute;
  inset-inline-start: 50%;
  inset-block-start: 50%;
  inline-size: 14px;
  block-size: 92px;
  background: linear-gradient(to bottom, var(--ray-color), transparent 85%);
  clip-path: polygon(10% 0, 90% 0, 62% 100%, 38% 100%);
  transform: translate(-50%, -100%);
}

/* ─── Prize text ─── */

.pf-chest-gc-sc__prize-text {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1px;
  line-height: 1;
  white-space: nowrap;
}

.pf-chest-gc-sc__prize-label {
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 0.12em;
  text-transform: uppercase;
}

.pf-chest-gc-sc__prize-amount {
  font-size: 17px;
  font-weight: 800;
  letter-spacing: 0.02em;
  font-variant-numeric: tabular-nums;
}

/* Prize text colors (driven by modifier custom properties) */

.pf-chest-gc-sc__prize-label {
  color: var(--label-color);
  text-shadow: 0 1px 3px var(--text-shadow);
}

.pf-chest-gc-sc__prize-amount {
  color: var(--amount-color);
  text-shadow:
    0 0 10px var(--amount-glow),
    0 1px 3px var(--text-shadow-strong);
}

/* ─── Claim button ─── */

.pf-chest-gc-sc__claim-btn {
  position: absolute;
  z-index: 10;
  inset-block-end: 12px;
  inset-inline-start: 50%;
  translate: -50% 0;
  padding: 8px 28px;
  border-radius: 50px;
  border: 2px solid var(--claim-btn-border);
  background: linear-gradient(180deg, var(--claim-btn-bg-start), var(--claim-btn-bg-end));
  color: var(--claim-btn-text);
  font-size: 14px;
  font-weight: 700;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  text-shadow: 0 1px 1px var(--claim-btn-text-shadow);
  cursor: pointer;
  pointer-events: auto;
  box-shadow:
    0 0 20px 6px var(--claim-btn-glow),
    0 4px 12px var(--claim-btn-shadow-dark);
  transition: box-shadow 160ms ease;
}

.pf-chest-gc-sc__claim-btn:hover {
  background: linear-gradient(180deg, var(--claim-btn-hover-bg-start), var(--claim-btn-hover-bg-end));
  border-color: var(--claim-btn-hover-border);
  box-shadow:
    0 0 24px 8px var(--claim-btn-hover-glow),
    0 4px 14px var(--claim-btn-hover-shadow-dark);
}

/* ─── Claim burst flash ─── */

.pf-chest-gc-sc__claim-burst {
  position: absolute;
  z-index: 8;
  inset-inline-start: 50%;
  inset-block-end: 25px;
  inline-size: 1px;
  block-size: 1px;
  border-radius: 50%;
  background: transparent;
  box-shadow:
    0 0 60px 40px var(--claim-burst-inner),
    0 0 120px 80px var(--claim-burst-outer);
  pointer-events: none;
}

/* ─── Responsive sizing by prize count ─── */

.pf-chest-gc-sc[data-prize-count='3'] .pf-chest-gc-sc__prize-icon-wrap {
  inline-size: 56px;
  block-size: 47px;
}

.pf-chest-gc-sc[data-prize-count='3'] .pf-chest-gc-sc__prize--rr .pf-chest-gc-sc__prize-icon-wrap {
  inline-size: 68px;
  block-size: 57px;
}

.pf-chest-gc-sc[data-prize-count='3'] .pf-chest-gc-sc__prize-rays-wrap {
  inline-size: 120px;
}

.pf-chest-gc-sc[data-prize-count='3'] .pf-chest-gc-sc__prize-glow {
  box-shadow: 0 0 35px 25px var(--glow-color);
}

.pf-chest-gc-sc[data-prize-count='4'] .pf-chest-gc-sc__prize-icon-wrap {
  inline-size: 46px;
  block-size: 38px;
}

.pf-chest-gc-sc[data-prize-count='4'] .pf-chest-gc-sc__prize--rr .pf-chest-gc-sc__prize-icon-wrap {
  inline-size: 56px;
  block-size: 47px;
}

.pf-chest-gc-sc[data-prize-count='4'] .pf-chest-gc-sc__prize-rays-wrap {
  inline-size: 100px;
}

.pf-chest-gc-sc[data-prize-count='4'] .pf-chest-gc-sc__prize-glow {
  box-shadow: 0 0 30px 20px var(--glow-color);
}

.pf-chest-gc-sc[data-prize-count='4'] .pf-chest-gc-sc__prize-amount {
  font-size: 15px;
}

.pf-chest-gc-sc[data-prize-count='4'] .pf-chest-gc-sc__prize-ray::before {
  block-size: 70px;
  inline-size: 12px;
}

/* ─── Keyframes ─── */

@keyframes pf-chest-gc-sc-shake {
  0% {
    transform: translateX(0);
  }
  15% {
    transform: translateX(-6px) rotate(-1deg);
  }
  30% {
    transform: translateX(6px) rotate(1deg);
  }
  45% {
    transform: translateX(-5px) rotate(-0.5deg);
  }
  60% {
    transform: translateX(5px) rotate(0.5deg);
  }
  80% {
    transform: translateX(-2px);
  }
  100% {
    transform: translateX(0);
  }
}
